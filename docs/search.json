[
  {
    "objectID": "posts/2022-07-13_censos-historicos_02/index.html",
    "href": "posts/2022-07-13_censos-historicos_02/index.html",
    "title": "Evoluci√≥n del n√∫mero de municipios en Espa√±a (1842-2021)",
    "section": "",
    "text": "Utilizando datos de los censos hist√≥ricos y del Padr√≥n, se realizan visualizaciones de la evoluci√≥n del n√∫mero de municipios espa√±oles en el tiempo, desde el censo de 1842 hasta la actualidad."
  },
  {
    "objectID": "posts/2022-07-13_censos-historicos_02/index.html#introducci√≥n",
    "href": "posts/2022-07-13_censos-historicos_02/index.html#introducci√≥n",
    "title": "Evoluci√≥n del n√∫mero de municipios en Espa√±a (1842-2021)",
    "section": "Introducci√≥n",
    "text": "Introducci√≥n\nEn el post anterior describ√≠ el proceso para obtener los datos de los censos hist√≥ricos del INE. Los censos proporcionan datos de poblaci√≥n a nivel municipal1, de forma que ahora utilizar√© esos datos para analizar como ha evolucionado el n√∫mero de municipios en Espa√±a en el tiempo.\n\n\nObjetivo: ver la evoluci√≥n del n√∫mero de municipios en Espa√±a.\nEl municipio en Espa√±a es una entidad administrativa de nivel local que puede agrupar a una o varias localidades; por ejemplo el municipio de Pancrudo agrupa cuatro localidades2.Los municipios no son entidades fijas, sino que por distintos motivos hay municipios que desaparecen y otros que aparecen. Por ejemplo, Torremolinos existi√≥ como municipio hasta el censo de 1920, para desaparecer en el de 1930 por su integraci√≥n en el municipio de M√°laga, para posteriormente, en el censo de 1991, volver a ser municipio tras segregarse de M√°laga.\n\n\nEl n√∫mero de municipios cambia en el tiempo."
  },
  {
    "objectID": "posts/2022-07-13_censos-historicos_02/index.html#cuantos-municipios-han-existido-en-espa√±a",
    "href": "posts/2022-07-13_censos-historicos_02/index.html#cuantos-municipios-han-existido-en-espa√±a",
    "title": "Evoluci√≥n del n√∫mero de municipios en Espa√±a (1842-2021)",
    "section": "¬øCuantos municipios han existido en Espa√±a?",
    "text": "¬øCuantos municipios han existido en Espa√±a?\nDeber√≠a ser una pregunta f√°cil de responder pero no lo es; como ejemplo este documento. Hasta donde yo s√©, no existe en Espa√±a un registro del que pueda obtenerse el n√∫mero de municipios que han existido en el tiempo; as√≠ que, tratar√© de dar una respuesta utilizando los datos de los Censos hist√≥ricos y del Padr√≥n.\n\n\nNo es una pregunta f√°cil.\nLo que si puedo decir es que, con datos del Padr√≥n de 2021, actualmente hay en Espa√±a 8.131 municipios.\n\n\nActualmente hay 8.131 municipios.\nEl INE proporciona datos de 18 censos de poblaci√≥n, el primero en 1842 y el √∫ltimo en 2011. En el censo de 1842 hay datos de 11.291 municipios, mientras que en el de 2021, hay 8.116; es decir, una reducci√≥n de 3.175 municipios a lo largo de este periodo. Con esta informaci√≥n parece que la respuesta deber√≠a ser 11.291, pero no es as√≠, la din√°mica de creaci√≥n y desaparici√≥n de municipios es m√°s compleja, hay municipios como Torremolinos, que desaparecen y vuelven a aparecer.\nEn los 18 censos que proporciona el INE podemos encontrar un total de 11.910 c√≥digos municipales √∫nicos, as√≠ que parece que han existido en ese periodo el mismo n√∫mero de municipios. Digo parece porque la respuesta no es tan clara, ya que hay casos como la localidad Gatova, que cambi√≥ su c√≥digo municipal de 12066 a 46092 al incorporarse a la provincia de Valencia, desde la de Castell√≥n, en el censo de 2001. ¬øSon municipios diferentes? Bueno, podemos pensar que s√≠, ya que tienen c√≥digos municipales diferentes.\nAs√≠ que, seg√∫n mis cuentas y utilizando datos de los Censos3, han existido4 en Espa√±a 11.910 municipios.\n\n\nCon datos de los Censos, de 1842 a 2011, han existido 11.910 municipios.\nSin embargo, el √∫ltimo censo publicado es de 2011 y estamos en 2022, as√≠ que se han podido crear m√°s municipios desde 2011 hasta la actualidad. Efectivamente, si utilizamos los datos del Padr√≥n5, desde 2011 a 2022 se crearon en Espa√±a 16 municipios que no exist√≠an antes, por lo que la respuesta final es: han existido 11.926 municipios en Spain.\n\n\nA√±adiendo los datos del Padr√≥n, ese n√∫mero aumenta hasta los 11.926 municipios.\nComo actualmente, con datos del Padr√≥n de 2021, existen 8.131 municipios, eso quiere decir que desde el censo de 1842 se ha reducido el n√∫mero de municipios en 3.795."
  },
  {
    "objectID": "posts/2022-07-13_censos-historicos_02/index.html#evoluci√≥n-del-n√∫mero-de-municipios-censos",
    "href": "posts/2022-07-13_censos-historicos_02/index.html#evoluci√≥n-del-n√∫mero-de-municipios-censos",
    "title": "Evoluci√≥n del n√∫mero de municipios en Espa√±a (1842-2021)",
    "section": "Evoluci√≥n del n√∫mero de municipios (Censos)",
    "text": "Evoluci√≥n del n√∫mero de municipios (Censos)\nUtilizando los datos de los 18 censos de poblaci√≥n disponibles en la web del INE, la evoluci√≥n del n√∫mero de municipios puede verse en Figure¬†1 .\n\n\n\n\nGr√°fico 1: Evoluci√≥n del n√∫mero de municipios (datos de los Censos). Juro que mejorar√© el gr√°fico!!!!\n\n\n\n\nEn Figure¬†1 se aprecia que desde 1842 se ha reducido el n√∫mero de municipios, principalmente entre el censo de 1842 y el de 1933, y en los censos de 1979 y 1981. De las explicaciones no s√© mucho: 1) el censo de 1842 fue, como le√≠ no s√© donde, un censo extra√±o, y 2) A partir de 1970 se hizo un esfuerzo politico por reducir el n√∫mero de municipios ‚Ä¶..\nEl Figure¬†1 proporciona informaci√≥n, pero la tabla siguiente ?@tbl-muni se amplia un poco esa informaci√≥n, apreci√°ndose que del censo de 1842 al siguiente se redujo el n√∫mero de municipios en 1933; pero esa reducci√≥n, como se aprecia en ?@tbl-nn-muni-censo , es resultado de que desaparecieron 2.199 municipios mientras que aparecieron, o se crearon, 266.\nPara ahondar un poco m√°s en la din√°mica de la evoluci√≥n del n√∫mero de municipios en el tiempo, en la ?@tbl-muni se muestra m√°s informaci√≥n.\n\n\n\nCodelibrary(tidyverse)\n\ndf <- pjpv.datos.2022::ine_censos_historicos #- censos hist√≥ricos (1842-2011)\n\n# TABLA GOOD del CENSO: \ntabla_0 <- df %>% drop_na(pob) %>% \n  group_by(year) %>% summarise(nn = n_distinct(ine_muni))\n\ntabla_1 <- df %>% \n  filter(indicador %in% c(\"aparece\", \"desaparece\")) %>% \n  count(year, indicador) %>% \n  pivot_wider(names_from = indicador, values_from = n) %>% \n  mutate(nn_netos = aparece - desaparece) %>% \n  add_case(year = 1842, .before = 1)\n\ntabla_1a <- left_join(tabla_0, tabla_1) %>% \n  mutate(comprobacion = nn_netos) %>% \n  mutate(comprobacion = ifelse(year == \"1842\", first(nn), comprobacion)) %>% \n  mutate(comprobacion = cumsum(comprobacion) - nn)\n\ntabla_censo_ok <- tabla_1a %>% select(-comprobacion)\nnames(tabla_censo_ok) <- c(\"Censo\", \"N¬∫ municipios\", \"desaparecen\", \"aparecen\", \"Incremento\")\ntabla_censo_ok <- tabla_censo_ok %>% select(1, 2, \"Incremento\", everything())\n\ntable_ok <- tabla_censo_ok %>% \n  reactable::reactable(defaultPageSize = 18, theme = reactablefmtr::fivethirtyeight()) \n\ntable_ok"
  },
  {
    "objectID": "posts/2022-07-13_censos-historicos_02/index.html#evoluci√≥n-del-n√∫mero-de-municipios-padr√≥n",
    "href": "posts/2022-07-13_censos-historicos_02/index.html#evoluci√≥n-del-n√∫mero-de-municipios-padr√≥n",
    "title": "Evoluci√≥n del n√∫mero de municipios en Espa√±a (1842-2021)",
    "section": "Evoluci√≥n del n√∫mero de municipios (Padr√≥n)",
    "text": "Evoluci√≥n del n√∫mero de municipios (Padr√≥n)\nSi en lugar de los datos de los Censos, utilizamos los datos del Padr√≥n (1996, 1998-2021) la evoluci√≥n del n√∫mero de municipios en Espa√±a quedar√≠a como:\n\n\n\n\nGr√°fico 2: Evoluci√≥n del n√∫mero de municipios (datos del Padr√≥n) Juro que mejorar√© el gr√°fico!!!\n\n\n\n\nEl Figure¬†2 muestra que a partir de 1996, el n√∫mero de municipios ha aumentado de forma muy suave pero continuada, hasta llegar a los 8.131 municipios en 2021."
  },
  {
    "objectID": "posts/2022-07-13_censos-historicos_02/index.html#curiosidades",
    "href": "posts/2022-07-13_censos-historicos_02/index.html#curiosidades",
    "title": "Evoluci√≥n del n√∫mero de municipios en Espa√±a (1842-2021)",
    "section": "Curiosidades",
    "text": "Curiosidades\nEn Figure¬†1 y Figure¬†2 se muestran datos sobre la evoluci√≥n del n√∫mero de municipios, y hay 2 a√±os (2001 y 2011) en que tenemos cifras para el n√∫mero de municipios procedentes de 2 fuentes: Censos y padr√≥n. ¬øCoincidir√°n? No . Ya dir√© porqu√©. Es ‚Äúlogico‚Äù, bueno, puede pasar."
  },
  {
    "objectID": "posts/2022-07-13_censos-historicos_02/index.html#biblio",
    "href": "posts/2022-07-13_censos-historicos_02/index.html#biblio",
    "title": "Evoluci√≥n del n√∫mero de municipios en Espa√±a (1842-2021)",
    "section": "Biblio",
    "text": "Biblio\nBiblio:\n\nart√≠culo PAIS: https://elpais.com/elpais/2017/02/02/media/1486066904_389254.html La mitad de municipios puede desaparecer"
  },
  {
    "objectID": "posts/2022-07-11_my-quarto-blog/index.html",
    "href": "posts/2022-07-11_my-quarto-blog/index.html",
    "title": "Creaci√≥n de un blog con Quarto",
    "section": "",
    "text": "Como todo blog que se precie, üòú, en el primer post describir√© (un poco) el proceso de creaci√≥n del blog. Post provisional (WORK IN PROGRESS!!)"
  },
  {
    "objectID": "posts/2022-07-11_my-quarto-blog/index.html#introducci√≥n",
    "href": "posts/2022-07-11_my-quarto-blog/index.html#introducci√≥n",
    "title": "Creaci√≥n de un blog con Quarto",
    "section": "Introducci√≥n",
    "text": "Introducci√≥n\nLLevo unos d√≠as intentando crear un quarto blog. ya tengo experiencia, as√≠ que no me est√° resultando muy complicado, pero mejor si dejo aqu√≠ algunas notas.\n\n\nS√≠, la verdad es que es conveniente apuntarse cosas que luego ‚Ä¶"
  },
  {
    "objectID": "posts/2022-07-11_my-quarto-blog/index.html#qu√©-es-quarto",
    "href": "posts/2022-07-11_my-quarto-blog/index.html#qu√©-es-quarto",
    "title": "Creaci√≥n de un blog con Quarto",
    "section": "¬øQu√© es Quarto?",
    "text": "¬øQu√© es Quarto?\nC√≥mo se dice en su p√°gina web:\n\nQuarto¬Æ is an open-source scientific and technical publishing system built on Pandoc\n\nEs como una ‚Äúsegunda generaci√≥n‚Äù de Rmarkdown:\n\nQuarto is a multi-language, next generation version of R Markdown from RStudio, with many new features and capabilities. Like R Markdown, Quarto uses Knitr to execute R code, and is therefore able to render most existing Rmd files without modification.\n\nQuarto, no es un paquete de R, es una aplicaci√≥n independiente, de forma que se puede usar sin R. Puede usarse para correr chunk de R, Phyton, Julia y Observable. Se pueden generar documentos reproducibles con markdown o con jupiter notebooks.\nComo con Rmarkdown, se pueden hacer: reports, presentations, websites, blogs, and books in HTML, PDF, MS Word, ePub, and more."
  },
  {
    "objectID": "posts/2022-07-11_my-quarto-blog/index.html#c√≥mo-hacer-un-blog-con-quarto",
    "href": "posts/2022-07-11_my-quarto-blog/index.html#c√≥mo-hacer-un-blog-con-quarto",
    "title": "Creaci√≥n de un blog con Quarto",
    "section": "¬øC√≥mo hacer un blog con Quarto?",
    "text": "¬øC√≥mo hacer un blog con Quarto?\n\nHas de instalar Quarto1\nSi sigues la ruta de men√∫s: File > New Project > New Directory > Quarto Blog se te crear√° una Rproject con un blog.\nEl Rproject que acabamos de crear tendr√° esta estructura de archivos y carpetas:\n\n\n\n\n\n\n\nEstructura del Rproject (blog)\n\n\n\n\n\n\n\n\nCarpeta de posts: cada post en una carpeta\n\n\n\n\n\n\n\n\nCarpeta de un post (Wellcome post)\n\n\n\n\n\nGr√°fico 1: Estructura de carpetas del Rproject con nuestro blog"
  },
  {
    "objectID": "posts/2022-07-11_my-quarto-blog/index.html#referencias",
    "href": "posts/2022-07-11_my-quarto-blog/index.html#referencias",
    "title": "Creaci√≥n de un blog con Quarto",
    "section": "Referencias",
    "text": "Referencias\n(Algunos art√≠culos sobre Quarto)\n\n\n‚ÄúBea Milz - Creating a Blog with Quarto in 10 Steps.‚Äù n.d. Accessed July 14, 2022. https://beamilz.com/posts/2022-06-05-creating-a-blog-with-quarto/en/.\n\n\nNavarro, Danielle. 2022. ‚ÄúNotes from a Data Witch - Porting a Distill Blog to Quarto.‚Äù https://blog.djnavarro.net/posts/2022-04-20_porting-to-quarto/.\n\n\n‚ÄúQuarto.‚Äù n.d. Accessed July 13, 2022. https://quarto.org/.\n\n\n‚ÄúQuarto - Creating a Blog.‚Äù n.d. Accessed July 14, 2022. https://quarto.org/docs/websites/website-blog.html.\n\n\n‚ÄúWe Don‚Äôt Talk about Quarto  Alison Hill, PhD.‚Äù n.d. Accessed July 14, 2022. https://www.apreshill.com/blog/2022-04-we-dont-talk-about-quarto/."
  },
  {
    "objectID": "posts/2022-07-14_censos-historicos_03/index.html",
    "href": "posts/2022-07-14_censos-historicos_03/index.html",
    "title": "Municipios espa√±oles m√°s poblados (1842-2021)",
    "section": "",
    "text": "Utilizando datos de los censos hist√≥ricos y del Padr√≥n, se presentan visualizaciones del ranking de ciudades espa√±olas m√°s pobladas desde el censo de 1842 hasta la actualidad. (Post provisional!!!) Work in progress!!!"
  },
  {
    "objectID": "posts/2022-07-14_censos-historicos_03/index.html#introducci√≥n",
    "href": "posts/2022-07-14_censos-historicos_03/index.html#introducci√≥n",
    "title": "Municipios espa√±oles m√°s poblados (1842-2021)",
    "section": "Introducci√≥n",
    "text": "Introducci√≥n\nTambi√©n har√© posts de:\n\nimportancia hist√≥rica de las provincias (en cuanto a poblaci√≥n)\nimportancia hist√≥rica de las capitales de provincia (en su provincia)\n¬øEst√° m√°s concentrada la poblaci√≥n ahora que antes? 50% de la poblaci√≥n de Espa√±a\n\nPero antes he de\n\nAprender bien Quarto y escribir el primer post\nEscribir post sobre sesgo de genero en premios literarios en Spain"
  },
  {
    "objectID": "posts/2022-07-14_censos-historicos_03/index.html#ranking-de-municipios-m√°s-poblados",
    "href": "posts/2022-07-14_censos-historicos_03/index.html#ranking-de-municipios-m√°s-poblados",
    "title": "Municipios espa√±oles m√°s poblados (1842-2021)",
    "section": "Ranking de municipios m√°s poblados",
    "text": "Ranking de municipios m√°s poblados\nVoy a mostrar en una tabla y un gr√°fico el ranking de los municipios mas poblados en cada censo. Mostrare solo los municipios que en alguno de los censos haya estado entre los 20 municipios mas poblados. Para que la tabla y los gr√°ficos se vean razonablemente bien voy a mostrar los resultados de solo algunos de los censos y los datos actuales con datos del Padr√≥n de 2021.\nTabla\n\n\n\nCode# Post censos hist√≥ricos\n# Objetivo: ver que capitales de provincia estuvieron en alg√∫n momento entre las 10 m√°s pobladas\nlibrary(tidyverse)\n\n# cargo censos hist√≥ricos \ndf <- pjpv.datos.2022::ine_censos_historicos\n\n# fusiono con datos de padr√≥n 2021 \ndf_padron <- pjpv.curso.R.2022::ine_pob_mun_1996_2021 %>% \n  filter(year == 2021) %>% filter(poblacion == \"Total\") %>% \n  select(- poblacion, - ine_muni.n.orig) %>% \n  rename(pob = values) %>% \n  select(ine_muni, year, pob)\n\n# quito municipios de 2021 que no estan en df (1842-2011)\ndf_padron <- df_padron %>% filter(ine_muni %in% unique(df$ine_muni))\n\n# pongo a df las v. q van a hacer falta (ine_prov etc ....\nzz <- df %>% select(ine_muni, ine_muni.n.h, ine_prov, ine_prov.n, ine_ccaa, ine_ccaa.n, capital_prov, capital_ccaa, year) %>% filter(year == 2011) %>% select(-year)\ndf_padron <- left_join(df_padron, zz)\n\n\n# fusiono censos y padr√≥n OK \ndf <- full_join(df, df_padron)\nzz <- df %>% filter(ine_muni == \"28079\")\nzz <- df %>% filter(ine_muni.n.h == \"Pancrudo\")\n\n\n# calculo rankings (para cada censo)\ndf <- df %>%\n  #select(year, ine_muni, ine_muni.n, pob, ine_prov)  %>%\n  group_by(year) %>%\n  arrange(desc(pob), desc(lag(pob)) )  %>%\n  mutate(rank_1 = 1:n(), .after = pob) %>%\n  mutate(rank_2 = dplyr::dense_rank(desc(pob))) %>%\n  ungroup() %>% \n  arrange(year)\n\n# calculo tb variaciones en el ranking\ndf <- df %>%\n  group_by(ine_muni) %>%\n  arrange(year) %>%\n  mutate(rank_dif_1 = lag(rank_1) - rank_1, .after = rank_1) %>% \n  mutate(rank_max_dif_1 = \n           max(rank_1, na.rm = TRUE) - min(rank_1, na.rm = TRUE), \n         .after = rank_dif_1) %>% ungroup()\n  \nzz <- df %>% filter(ine_muni.n.h == \"Teruel\")\n\n\n\n# calculo de crecimientos etc....\ndf <- df %>%\n  group_by(ine_muni) %>%\n  arrange(year) %>%\n  dplyr::mutate(pob_incre = pob - lag(pob)) %>%\n  dplyr::mutate(pob_percent = pob_incre / lag(pob) * 100) %>%\n  dplyr::mutate(qq_years = year - lag(year)) %>%\n  dplyr::mutate(pob_percent_acu = cumsum(coalesce(pob_incre,0)/first(pob)*100)) %>%\n  dplyr::mutate(qq_years_acu = cumsum(ifelse(is.na(qq_years), 0, qq_years))) %>%\n  dplyr::mutate(crec_percent_medio = pob_percent/qq_years) %>% \n  dplyr::mutate(crec_percent_medio_acu = pob_percent_acu/qq_years_acu) %>% \n  relocate(c(ine_prov, ine_prov.n), .after = last_col()) %>% ungroup\n\nzz <- df %>% filter(ine_muni.n.h == \"Teruel\")\n\n\n# veamos q capitales de prov. han estado alguna vez entre las 10 m√°s pobladas\nqq_mas_pobladas <- 20\nzz <- df %>%\n  filter(rank_1 <= qq_mas_pobladas) %>%\n  distinct(ine_muni, ine_muni.n.h) %>% pull(ine_muni.n.h) #%>% print()  # 17 ciudades (cuidado con filtrar x nombre)\n\nzz <- df %>%\n  filter(rank_1 <= qq_mas_pobladas) %>%\n  distinct(ine_muni, ine_muni.n.h)  # xx ciudades (cuidado con filtrar x nombre)\n#print(zz$ine_muni.n.h)\n\n# filtremos, qued√©monos con los datos de esas xx ciudades\ndf_table <- df %>% filter(ine_muni %in% zz$ine_muni)   # ok\n\n\n# Tablas ----------------------------------------------------------------------\n# nos quedamos con las 3 v. q queremos mostrar\ndf_table <- df_table %>%\n  select(ine_muni.n.h, year, rank_1)\n\n# hay q pasar la df_table a formato ancho (2 posibilidades)\ndf_t1 <- df_table %>% tidyr::pivot_wider(names_from = year, values_from = rank_1)\ndf_t2 <- df_table %>% tidyr::pivot_wider(names_from = ine_muni.n.h, values_from = rank_1)\n\n# hay muchos pkgs para tablas\n# DT::datatable(df_t1)\n# gt::gt(df_t2)\n\n\n# gt: https://gt.rstudio.com/\n# gallery: https://community.rstudio.com/c/table-gallery/64\n# ejemplo: https://jelloque.github.io/trabajo_BigData/#5_LOS_CICLISTAS\n# otro: https://twitter.com/irg_bio/status/1486291227255451648?ref_src=twsrc%5Etfw%7Ctwcamp%5Etweetembed%7Ctwterm%5E1486291227255451648&ref_url=file%3A%2F%2F%2Fhome%2Fpjpv%2FEscritorio%2Fmys_COSAS%2Fmy_learn_RR%2Flearn_ggplot2%2Fejemplos_ggplot2_2022.html\n\n# gt::gt(df_t2) %>%\n#   gt::tab_header(title = \"Capitales m√°s pobladas\",\n#     subtitle = glue::glue(\"{min(df$year)} to {max(df$year)}\"))\n\n# quito algunos censos para que las tablas se vean mejor\nzz <- df %>% distinct(year)\n\ndf_ok <- df_t1 %>% rename(municipio = ine_muni.n.h) %>% \n  select(municipio, `1842`, `1857`, `1877`, `1897`, `1910`, `1930`, `1950`, `1970`, `1991`, `2021`)\n\n# table_ok <- df_ok %>% \n#   reactable::reactable(defaultPageSize = 36, compact = TRUE,\n#                        filterable  = TRUE, \n#                        theme = reactablefmtr::fivethirtyeight(cell_padding = 1, font_size = 11, header_font_size = 13)) \n# \n# table_ok\n# \n\n# mejoramos las tablas\n# DT: https://rstudio.github.io/DT/\nDT::datatable(df_ok, filter = 'top', extensions = \"Scroller\",\n              class = 'cell-border stripe',\n              options = list(autoWidth = TRUE,deferRender = TRUE,\n                             scroller = TRUE, scrollY = 750 ))\n\n\n\n\n\n\n\n\nPor hacer un m√≠nimo comentario de los resultados mostrados en la tabla, se√±alar que Madrid ha estado siempre en el puesto 1 o 2, Hospitalet de LLobregat es el municipio (de los que en alg√∫n momento estuvo en el top 20) menos poblado en 1842. Caravaca de la Cruz era el 16¬∫ municipio por poblaci√≥n en 1842 mientras que en 2021 ocupa el puesto 313.\nGr√°fico\nLas tablas est√°n muy bien si necesitas sabes los valores exactos de una variable o si quieres ver algun detalle, pero para ver la evoluci√≥n es mejor un gr√°fico."
  },
  {
    "objectID": "posts/2022-07-12_censos-historicos_01/index.html",
    "href": "posts/2022-07-12_censos-historicos_01/index.html",
    "title": "Censos hist√≥ricos (1842-2011): obtenci√≥n de los datos",
    "section": "",
    "text": "Se describe el proceso de obtenci√≥n y procesado de los datos de los censos hist√≥ricos de poblaci√≥n en Espa√±a (1842-2011) que ofrece el INE."
  },
  {
    "objectID": "posts/2022-07-12_censos-historicos_01/index.html#introducci√≥n",
    "href": "posts/2022-07-12_censos-historicos_01/index.html#introducci√≥n",
    "title": "Censos hist√≥ricos (1842-2011): obtenci√≥n de los datos",
    "section": "Introducci√≥n",
    "text": "Introducci√≥n\nA todos nos gusta saber cuantos habitantes tiene nuestro pueblo; y como nos dice el conde Draco esto se hace en los censos. Un censo de poblaci√≥n es una operaci√≥n estad√≠stica cuyo principal objetivo es hacer un recuento de la poblaci√≥n, as√≠ como de sus principales caracter√≠sticas sociales y demogr√°ficas. En este post describo el proceso que tuve que para obtener y procesar los datos de los censos hist√≥ricos de poblaci√≥n en Espa√±a que ofrece el INE en su web. En posteriores posts se supone que los usar√© para hacer algunas visualizaciones y an√°lisis, como por ejemplo, la evoluci√≥n del ranking de capitales de provincia m√°s pobladas o la evoluci√≥n de la importancia (en t√©rminos de poblaci√≥n) de las capitales provinciales en su propia provincia; adem√°s, seguro que utilizo estos datos en mi curso de introducci√≥n a R en la UV. Son datos chulos y no exigen mucha carga mental para analizarlos.\n\n\nObjetivo: Obtener los datos de los censos hist√≥ricos (1842-2011) ofrecidos por el INE."
  },
  {
    "objectID": "posts/2022-07-12_censos-historicos_01/index.html#obtenci√≥n-de-los-datos-web-scraping",
    "href": "posts/2022-07-12_censos-historicos_01/index.html#obtenci√≥n-de-los-datos-web-scraping",
    "title": "Censos hist√≥ricos (1842-2011): obtenci√≥n de los datos",
    "section": "Obtenci√≥n de los datos (Web scraping)",
    "text": "Obtenci√≥n de los datos (Web scraping)\nEl INE ofrece aqu√≠ acceso a los censos realizados en Espa√±a durante el periodo 1857-19701. El acceso es a trav√©s de documentos pdf, de forma que, para poder recopilar los datos all√≠ contenidos se tendr√≠an que procesar a mano (no way!!) o por tecnolog√≠as OCR (hay que saber mucho y ser un poco orfebre!!)2; as√≠ que me olvid√© de los pdf‚Äôs y me fui al segundo punto de acceso a los datos, concretamente aqu√≠ para obtener los datos por Web scraping. En este segundo punto de acceso se ofrecen datos de los censos para el periodo 1842-2011.\n\n\nObtendremos los datos mediante web scraping\nEsta segunda forma de obtener los datos, por Web scraping, tampoco es que sea extremadamente f√°cil ya que el INE, ofrece un buscador en el que puedes hacer consultas para un s√≥lo municipio (o provincia), de forma que, habr√≠a que hacer cerca de 12.000 consultas a mano para descargarse los datos de poblaci√≥n de todos los municipios espa√±oles que han existido desde 1842. Factible, pero mejor si se hacen las peticiones de datos mediante un proceso automatizado y descargas los datos mediante Web scraping. De esta forma se recogen los datos en menos de una hora.\nSer√≠a as√≠ de f√°cil si el INE ofreciese un listado de c√≥digos para los municipios que han existido a lo largo de la historia en Espa√±a para as√≠ poder hacer las consultas, pero esto no es as√≠. El INE ofrece un listado de c√≥digos municipales aqu√≠ pero s√≥lo para los municipios ‚Äúactuales‚Äù, as√≠ que el proceso para obtener los datos tuvo varias etapas:\n\n\nEl proceso de scraping tuvo varias etapas\n\nDe los datos de la revisi√≥n del padr√≥n municipal extraje los c√≥digos de los municipios que han existido en Espa√±a en el periodo 1996 y 1998-2021: un total de 8.120 c√≥digos municipales. Con estos c√≥digos hice peticiones a la web del INE para generar las tablas con sus datos y poder hacer Web scraping para extraer los datos de poblaci√≥n de los censos hist√≥ricos de esos 8.120 municipios.\nEn las tablas de cada municipio, adem√°s de los datos de poblaci√≥n3, se ofrece una serie de notas con informaci√≥n sobre fen√≥menos como el cambio de nombre de los municipios y sus alteraciones municipales4. Al procesar estas anotaciones, buscando conjuntos de d√≠gitos de 5 o 6 d√≠gitos, se consiguieron recuperar 2.924 c√≥digos municipales adicionales. Son c√≥digos que no aparecen en los datos del Padr√≥n porque estos municipios se extinguieron antes de 1998.\nCon los c√≥digos de estos 2.924 ‚Äúnuevos‚Äù municipios se hicieron nuevas peticiones al INE, de las cuales surgieron nuevas notas de alteraciones municipales, que a su vez proporcionaron nuevos c√≥digos municipales.\nSe tuvo que repetir este proceso 5 veces hasta que de las notas de la √∫ltima vuelta no surgieron nuevos c√≥digos municipales. En total hab√≠a escrapeado un total de 11.882 municipios: 8.120 en la primera vuelta, 2.924 en la segunda, 767, 69, y finalmente 2 nuevos municipios en la quinta y √∫ltima ronda.\n\nParec√≠a que todo estaba bien, que hab√≠a conseguido localizar todos los municipios existentes en la web del INE, pero ‚Ä¶ no me fiaba ya que del procesado de texto siempre suele haber errores, as√≠ que gracias a que conozco a Francisco J. Goerlich, seguramente la persona que m√°s sabe de estos temas5, consegu√≠ detectar que me faltaban a√∫n 28 municipios por encontrar. El fallo no fue causado por mi proceso de scraping sino por ‚Äúfallos‚Äù en las anotaciones en las tablas del INE.\n\n\nTras las 5 vueltas del scraping se recopilaron datos de 11.882 c√≥digos municipales ‚Ä¶\nDe los 28 municipios que el scraping no detect√≥, en 4 de ellos el motivo fue que hab√≠a fallos6 en las notas que hubieran permitido detectarlos. En los restantes 24 municipios que no se detectaron, la raz√≥n fue similar: son municipios que solo aparecen en el primer censo que registra el INE, el de 1842, y en su nota al pie solo pone algo como ‚ÄúEste municipio que aparece en el Censo de 1842, ‚Ä¶, no se le localiza en el Censo de 1857‚Äù, pero no dice si se integraron en otro municipio o se volatilizaron, de forma que era imposible detectarlos mediante el proceso de Web scraping.\n\n\n‚Ä¶ pero a√∫n faltaban 28 municipios.\nTras este proceso, ten√≠a los datos de los 11.910 municipios que han existido en Espa√±a, a juzgar por la informaci√≥n que aparece en los censos hist√≥ricos del INE 1842-20117.\n\n\nAl final se obtuvieron datos de 11.910 municipios."
  },
  {
    "objectID": "posts/2022-07-12_censos-historicos_01/index.html#qu√©-variables-hay-en-los-datos",
    "href": "posts/2022-07-12_censos-historicos_01/index.html#qu√©-variables-hay-en-los-datos",
    "title": "Censos hist√≥ricos (1842-2011): obtenci√≥n de los datos",
    "section": "¬øQu√© variables hay en los datos?",
    "text": "¬øQu√© variables hay en los datos?\nLos datos del INE contienen, tal y como se explica aqu√≠, una tabla para cada uno de los municipios que han sido censados en Espa√±a desde 1842. Para cada municipio se recogen 3 variables: poblaci√≥n de hecho, poblaci√≥n de derecho y n√∫mero de hogares. Adem√°s se recogen, en las notas al pie de la tabla, determinadas alteraciones municipales. Como ejemplo, aqu√≠ puedes ver la tabla para Pancrudo que, como se aprecia en las notas, incorpor√≥ a Portalrubio en el censo de 1981.\n\n\n3 variables: hogares, poblaci√≥n de hecho y poblaci√≥n de derecho.\nEn la tabla se aprecia que hay dos variables de poblaci√≥n: la de hecho y la de derecho. Para mis an√°lisis utilizar√© la poblaci√≥n de derecho, salvo en los censos de 1857 y 1860 en los que como no hay registro para la poblaci√≥n de derecho, la sustituir√© por la de hecho, para as√≠ tener una serie completa de poblaci√≥n para todos los censos del periodo 1842-2011. Es posible que en algunos an√°lisis a√±ada tambi√©n los datos del Padr√≥n (1998-2021).\n\n\nUsare la poblaci√≥n de derecho, salvo cuando esta no est√© disponible."
  },
  {
    "objectID": "posts/2022-07-12_censos-historicos_01/index.html#cifras-oficiales-de-poblaci√≥n",
    "href": "posts/2022-07-12_censos-historicos_01/index.html#cifras-oficiales-de-poblaci√≥n",
    "title": "Censos hist√≥ricos (1842-2011): obtenci√≥n de los datos",
    "section": "¬øCifras oficiales de poblaci√≥n?",
    "text": "¬øCifras oficiales de poblaci√≥n?\nVoy a utilizar estos datos para hacer algunos an√°lisis y visualizaciones, as√≠ que cabe preguntarse si son datos ‚Äúoficiales‚Äù de poblaci√≥n y si est√°n libres de errores. En principio los datos que he obtenido por web scraping de la web del INE deber√≠an ser las ‚Äúcifras oficiales‚Äù de poblaci√≥n de los municipios espa√±oles, pero en Goerlich y otros (2015) se√±alan, concretamente en los apartados 2.2.6, 2.2.7 y 2.2.8, diversos errores de transcripci√≥n8.\n\n\nGoerlich y otros (2015) detectaron errores de transcripci√≥n.\nSin embargo, esos errores detectados pr√°cticamente no afectan a los an√°lisis y visualizaciones que har√© en el blog. En concreto, los errores detectados que afectan a las capitales de provincia son menores, solo detect√°ndose diferencias importantes en Ceuta, Melilla y Madrid en el censo de 19919, as√≠ que para los an√°lisis que voy a hacer en el blog doy por buenos los datos que figuran aqu√≠ en la web del INE.\n\n\nEsos errores afectar√≠an m√≠nimamente a los resultados mostrados en el blog.\nMi objetivo no es hacer un art√≠culo cient√≠fico, sino tan solo, hacer algunos an√°lisis y visualizaciones que describan, a grandes rasgos, la evoluci√≥n hist√≥rica de la poblaci√≥n municipal en Espa√±a, para usarlos en mis clases, as√≠ que yo los voy a dar por buenos.\nTampoco voy a tratar de corregir la poblaci√≥n por las alteraciones municipales que hayan ocurrido; es decir no trato de obtener series homog√©neas de poblaci√≥n, entre otras cosas porque ya lo ha hecho Paco Goerlich!!\nSupongo que un historiador podr√° decir mucho sobre la validez, cambios de criterios y dem√°s infortunios acaecidos a lo largo de los distintos censos. Yo aqu√≠ voy a dar por buenos los datos: son del INE!! üòá\nBueno pues ya he dejado medio descrito el proceso de obtenci√≥n de los datos as√≠ que cierro el post: ya los usar√© en futuros post."
  },
  {
    "objectID": "posts/2022-07-12_censos-historicos_01/index.html#qu√©-voy-a-hacer-con-los-datos",
    "href": "posts/2022-07-12_censos-historicos_01/index.html#qu√©-voy-a-hacer-con-los-datos",
    "title": "Censos hist√≥ricos (1842-2011): obtenci√≥n de los datos",
    "section": "¬øQu√© voy a hacer con los datos?",
    "text": "¬øQu√© voy a hacer con los datos?\nLa verdad es que los datos cuesta un poquito acceder a ellos, menos mal que ven√≠a de un proyecto en el que hab√≠a escrapeado los resultados de atletismo de la IAAF, que despu√©s me hab√≠a llevado a escrapear datos de premios literarios, vamos que estaba entrenado en scraping y en una tarde lo ten√≠a (casi) hecho, pero ‚Ä¶ y ‚Ä¶ y al final ten√≠a los datos!!! üòÄ Demasiado jaleo para lo que voy a hacer10 pero, ‚Ä¶\nOK, vale, pero ¬øqu√© vas a hacer? Pues a√∫n no lo s√© del todo, pero seguro que juego con ellos para satisfacer mi curiosidad y preparar posibles ejercicios para el pr√≥ximo curso.\n\n\nVeremos que hago con estos datos ‚Ä¶"
  },
  {
    "objectID": "posts/2022-07-12_censos-historicos_01/index.html#referencias",
    "href": "posts/2022-07-12_censos-historicos_01/index.html#referencias",
    "title": "Censos hist√≥ricos (1842-2011): obtenci√≥n de los datos",
    "section": "Referencias",
    "text": "Referencias\n(Algunos art√≠culos que hablan de la evoluci√≥n hist√≥rica de la poblaci√≥n y/o de los censos hist√≥ricos)\n\n\nAlbet i Mas, Abel. 1970. ‚ÄúEl Mapa Municipal En Espa√±a: Estructura, Evoluci√≥n y Problem√°ticas.‚Äù Geopol√≠tica(s). Revista de Estudios Sobre Espacio y Poder 10 (1): 11‚Äì40. https://doi.org/10.5209/GEOP.63834.\n\n\nPa√≠s, Ediciones El. 2021. ‚ÄúAs√≠ Ha Cambiado Espa√±a Desde Los Primeros Censos Del Siglo XVIII.‚Äù Verne. https://verne.elpais.com/verne/2021/03/01/articulo/1614584363_382946.html.\n\n\nPrieto, Gonzalo. 2016. ‚ÄúLa Evoluci√≥n de Madrid a Lo Largo de La Historia.‚Äù Geograf√≠a Infinita. https://www.geografiainfinita.com/2016/01/historia-del-plano-de-madrid/."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "R & flowers &nbsp; (a quarto blog) &nbsp; //A√öN en PRUEBAS//",
    "section": "",
    "text": "datos INE\n\n\nCensos hist√≥ricos\n\n\npoblaci√≥n\n\n\nmunicipios\n\n\n\n\n\n\n\n\n\n\n\nJul 14, 2022\n\n\nPedro J. P√©rez\n\n\n\n\n\n\n  \n\n\n\n\n\n\n\n\n\n\ndatos INE\n\n\nCensos hist√≥ricos\n\n\nmunicipios\n\n\n\n\n\n\n\n\n\n\n\nJul 13, 2022\n\n\nPedro J. P√©rez\n\n\n\n\n\n\n  \n\n\n\n\n\n\n\n\n\n\ndatos INE\n\n\nCensos hist√≥ricos\n\n\npoblaci√≥n\n\n\nmunicipios\n\n\n\n\n\n\n\n\n\n\n\nJul 12, 2022\n\n\nPedro J. P√©rez\n\n\n\n\n\n\n  \n\n\n\n\n\n\n\n\n\n\nquarto\n\n\n\n\n\n\n\n\n\n\n\nJul 11, 2022\n\n\nPedro J. P√©rez\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "Pedro J. P√©rez",
    "section": "",
    "text": "Remember kids, the only difference between screwing around and science is writing it down ‚Äî Adam Savage de MythBusters"
  }
]